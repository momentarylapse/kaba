class Test as shared
	func __init__()
		print("init")
	func __delete__()
		print("del")
	func const f()
		print("f")

func ff(x: Test)
	x.f()

func main()
#	shared Test x = new Test()

	shared Test[] a
	print("a")
	shared Test xx = new Test()
	ff(weak(xx))
	print("a2")
	a.add(xx)
	print("a3")
	a.add(xx)
	print("a4")
	xx = new Test()
	a.add(xx)
	print("a5")

	for x in weak(a)
		ff(x)

